{
  "info": {
    "name": "Medical API - Complete Corrected",
    "description": "Comprehensive Medical API collection with all corrections applied",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "practitionerAccessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "practitionerRefreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "tenantId",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "patientId",
      "value": "",
      "type": "string"
    },
    {
      "key": "appointmentId",
      "value": "",
      "type": "string"
    },
    {
      "key": "encounterId",
      "value": "",
      "type": "string"
    },
    {
      "key": "invoiceId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login SuperAdmin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    if (response.user && response.user.tenantId) {",
                  "        pm.collectionVariables.set('tenantId', response.user.tenantId);",
                  "    }",
                  "    if (response.user && response.user.id) {",
                  "        pm.collectionVariables.set('userId', response.user.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Clinique proprietaire",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@clinique-exemple.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    if (response.user && response.user.tenantId) {",
                  "        pm.collectionVariables.set('tenantId', response.user.tenantId);",
                  "    }",
                  "    if (response.user && response.user.id) {",
                  "        pm.collectionVariables.set('userId', response.user.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{refreshToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    if (response.refreshToken) {",
                  "        pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.set('accessToken', '');",
                  "    pm.collectionVariables.set('refreshToken', '');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Tenants",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/tenants",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "tenants"]
            }
          }
        },
        {
          "name": "Get Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          }
        },
        {
          "name": "Update User",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated Name\",\n  \"lastName\": \"Updated Last\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          }
        },
        {
          "name": "👨‍⚕️ Practitioner Authentication",
          "item": [
            {
              "name": "Practitioner Login",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('practitionerAccessToken', response.accessToken);",
                      "    pm.collectionVariables.set('practitionerRefreshToken', response.refreshToken);",
                      "    pm.test('Login successful', () => {",
                      "        pm.expect(response).to.have.property('accessToken');",
                      "        pm.expect(response).to.have.property('practitioner');",
                      "    });",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"sarah.johnson@clinic.com\",\n  \"password\": \"practitioner123\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/practitioner/login",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "practitioner", "login"]
                }
              }
            },
            {
              "name": "Get Practitioner Profile",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/auth/practitioner/profile",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "practitioner", "profile"]
                }
              }
            },
            {
              "name": "Practitioner Refresh Token",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('practitionerAccessToken', response.accessToken);",
                      "    pm.collectionVariables.set('practitionerRefreshToken', response.refreshToken);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refreshToken\": \"{{practitionerRefreshToken}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/practitioner/refresh",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "practitioner", "refresh"]
                }
              }
            },
            {
              "name": "Practitioner Logout",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refreshToken\": \"{{practitionerRefreshToken}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/practitioner/logout",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "practitioner", "logout"]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Patients",
      "item": [
        {
          "name": "Create Patient",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clinicId\": \"{{tenantId}}\",\n  \"mrn\": \"MRN-001\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"dob\": \"1990-01-15\",\n  \"gender\": \"M\",\n  \"bloodType\": \"O_POSITIVE\",\n  \"phone\": \"+1234567890\",\n  \"email\": \"john.doe@email.com\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients",
              "host": ["{{baseUrl}}"],
              "path": ["patients"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('patientId', response.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Patients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients",
              "host": ["{{baseUrl}}"],
              "path": ["patients"]
            }
          }
        },
        {
          "name": "Search Patients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/search?search=John",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "search"],
              "query": [
                {
                  "key": "search",
                  "value": "John",
                  "description": "Recherche générale par nom, prénom, MRN ou email"
                },
                {
                  "key": "mrn",
                  "value": "",
                  "description": "Recherche par numéro de dossier médical",
                  "disabled": true
                },
                {
                  "key": "firstName",
                  "value": "",
                  "description": "Recherche par prénom",
                  "disabled": true
                },
                {
                  "key": "lastName",
                  "value": "",
                  "description": "Recherche par nom de famille",
                  "disabled": true
                },
                {
                  "key": "gender",
                  "value": "",
                  "description": "Recherche par genre (M, F, O)",
                  "disabled": true
                },
                {
                  "key": "email",
                  "value": "",
                  "description": "Recherche par email",
                  "disabled": true
                },
                {
                  "key": "phone",
                  "value": "",
                  "description": "Recherche par téléphone",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Get Patient by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Update Patient",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+1234567899\",\n  \"email\": \"john.doe.updated@email.com\",\n  \"address\": {\n    \"street\": \"456 Updated St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10002\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Delete Patient",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Upload Patient Document",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "Sélectionnez un fichier à uploader"
                },
                {
                  "key": "patientId",
                  "value": "{{patientId}}",
                  "type": "text"
                },
                {
                  "key": "docType",
                  "value": "ORDONNANCE",
                  "type": "text"
                },
                {
                  "key": "uploadedBy",
                  "value": "{{userId}}",
                  "type": "text"
                },
                {
                  "key": "tags",
                  "value": "medical,prescription",
                  "type": "text",
                  "description": "Tags séparés par des virgules"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/patients/documents/upload",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "documents", "upload"]
            }
          }
        },
        {
          "name": "Get Patient Documents",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/documents/patient/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "documents", "patient", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Get Patient Medical History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/medical-history/patient/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "medical-history", "patient", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Add Medical History Entry",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{patientId}}\",\n  \"type\": \"ALLERGY\",\n  \"label\": \"Penicillin\",\n  \"note\": \"Patient reported severe reaction to penicillin\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/medical-history",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "medical-history"]
            }
          }
        }
      ]
    },
    {
      "name": "Scheduling",
      "item": [
        {
          "name": "Create Practitioner",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Dr. Sarah\",\n  \"lastName\": \"Johnson\",\n  \"speciality\": \"CARDIOLOGY\",\n  \"email\": \"dr.johnson@clinic.com\",\n  \"phoneNumber\": \"+1234567890\",\n  \"workingHours\": [\n    {\n      \"dayOfWeek\": \"MONDAY\",\n      \"slots\": [\n        {\n          \"start\": \"09:00\",\n          \"end\": \"17:00\"\n        }\n      ]\n    },\n    {\n      \"dayOfWeek\": \"TUESDAY\",\n      \"slots\": [\n        {\n          \"start\": \"09:00\",\n          \"end\": \"17:00\"\n        }\n      ]\n    },\n    {\n      \"dayOfWeek\": \"WEDNESDAY\",\n      \"slots\": [\n        {\n          \"start\": \"09:00\",\n          \"end\": \"17:00\"\n        }\n      ]\n    },\n    {\n      \"dayOfWeek\": \"THURSDAY\",\n      \"slots\": [\n        {\n          \"start\": \"09:00\",\n          \"end\": \"17:00\"\n        }\n      ]\n    },\n    {\n      \"dayOfWeek\": \"FRIDAY\",\n      \"slots\": [\n        {\n          \"start\": \"09:00\",\n          \"end\": \"17:00\"\n        }\n      ]\n    }\n  ],\n  \"slotDuration\": 30,\n  \"color\": \"#FF5733\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/practitioners",
              "host": ["{{baseUrl}}"],
              "path": ["practitioners"]
            }
          }
        },
        {
          "name": "Get All Practitioners",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/practitioners",
              "host": ["{{baseUrl}}"],
              "path": ["practitioners"]
            }
          }
        },
        {
          "name": "Create Appointment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{patientId}}\",\n  \"practitionerId\": \"b84141c5-8d0e-4b80-9da7-d5f6b2812daa\",\n  \"startAt\": \"2024-02-15T10:00:00Z\",\n  \"endAt\": \"2024-02-15T10:30:00Z\",\n  \"room\": \"Room 101\",\n  \"reason\": \"Regular checkup appointment\",\n  \"urgency\": \"ROUTINE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/appointments",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('appointmentId', response.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Appointments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/appointments?date=2024-02-15",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"],
              "query": [
                {
                  "key": "date",
                  "value": "2024-02-15"
                }
              ]
            }
          }
        },
        {
          "name": "Get Appointment by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/appointments/{{appointmentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["appointments", "{{appointmentId}}"]
            }
          }
        },
        {
          "name": "Update Appointment",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"startAt\": \"2024-02-15T11:00:00Z\",\n  \"endAt\": \"2024-02-15T11:30:00Z\",\n  \"reason\": \"Updated appointment time\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/appointments/{{appointmentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["appointments", "{{appointmentId}}"]
            }
          }
        },
        {
          "name": "Cancel Appointment",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cancellationReason\": \"Patient requested cancellation\",\n  \"notifyPatient\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/appointments/{{appointmentId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["appointments", "{{appointmentId}}", "cancel"]
            }
          }
        },
        {
          "name": "Add to Wait Queue",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{patientId}}\",\n  \"practitionerId\": \"b84141c5-8d0e-4b80-9da7-d5f6b2812daa\",\n  \"priority\": \"NORMAL\",\n  \"reason\": \"Walk-in consultation\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/wait-queue",
              "host": ["{{baseUrl}}"],
              "path": ["wait-queue"]
            }
          }
        },
        {
          "name": "Get Wait Queue",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/wait-queue",
              "host": ["{{baseUrl}}"],
              "path": ["wait-queue"]
            }
          }
        },
        {
          "name": "👨‍⚕️ Practitioner Schedule",
          "item": [
            {
              "name": "Get Today's Appointments",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments"]
                }
              }
            },
            {
              "name": "Get Appointments by Date",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments?date=2024-02-15",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments"],
                  "query": [
                    {
                      "key": "date",
                      "value": "2024-02-15",
                      "description": "Date au format YYYY-MM-DD"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Weekly Appointments",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments/week",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments", "week"]
                }
              }
            },
            {
              "name": "Get Weekly Appointments with Start Date",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments/week?startDate=2024-02-12",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments", "week"],
                  "query": [
                    {
                      "key": "startDate",
                      "value": "2024-02-12",
                      "description": "Date de début de la semaine (YYYY-MM-DD)"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Monthly Appointments",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments/month",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments", "month"]
                }
              }
            },
            {
              "name": "Get Monthly Appointments with Year/Month",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments/month?year=2024&month=2",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments", "month"],
                  "query": [
                    {
                      "key": "year",
                      "value": "2024",
                      "description": "Année (ex: 2024)"
                    },
                    {
                      "key": "month",
                      "value": "2",
                      "description": "Mois (1-12)"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Appointment by ID",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/appointments/{{appointmentId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "appointments", "{{appointmentId}}"]
                }
              }
            },
            {
              "name": "Get Availability",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/availability",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "availability"]
                }
              }
            },
            {
              "name": "Get Availability by Date",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/availability?date=2024-02-15",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "availability"],
                  "query": [
                    {
                      "key": "date",
                      "value": "2024-02-15",
                      "description": "Date pour vérifier la disponibilité (YYYY-MM-DD)"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Statistics",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/stats",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "stats"]
                }
              }
            },
            {
              "name": "Get Statistics with Date Range",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{practitionerAccessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/practitioner/schedule/stats?startDate=2024-02-01&endDate=2024-02-29",
                  "host": ["{{baseUrl}}"],
                  "path": ["practitioner", "schedule", "stats"],
                  "query": [
                    {
                      "key": "startDate",
                      "value": "2024-02-01",
                      "description": "Date de début pour les statistiques (YYYY-MM-DD)"
                    },
                    {
                      "key": "endDate",
                      "value": "2024-02-29",
                      "description": "Date de fin pour les statistiques (YYYY-MM-DD)"
                    }
                  ]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "EHR (Electronic Health Records)",
      "item": [
        {
          "name": "Create Encounter",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{patientId}}\",\n  \"practitionerId\": \"b84141c5-8d0e-4b80-9da7-d5f6b2812daa\",\n  \"appointmentId\": \"{{appointmentId}}\",\n  \"type\": \"CONSULTATION\",\n  \"status\": \"IN_PROGRESS\",\n  \"chiefComplaint\": \"Patient reports chest pain\",\n  \"presentIllness\": \"Patient experiencing intermittent chest pain for 2 days\",\n  \"vitalSigns\": {\n    \"bloodPressure\": \"120/80\",\n    \"heartRate\": 72,\n    \"temperature\": 98.6,\n    \"respiratoryRate\": 16,\n    \"oxygenSaturation\": 98\n  },\n  \"physicalExam\": \"Normal heart sounds, no murmurs detected\",\n  \"assessment\": \"Possible anxiety-related chest pain\",\n  \"plan\": \"Recommend stress management and follow-up in 1 week\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/encounters",
              "host": ["{{baseUrl}}"],
              "path": ["encounters"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('encounterId', response.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Encounters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/encounters?patientId={{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["encounters"],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{patientId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Encounter by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/encounters/{{encounterId}}",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "{{encounterId}}"]
            }
          }
        },
        {
          "name": "Update Encounter",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"COMPLETED\",\n  \"assessment\": \"Updated assessment: Anxiety-related chest pain confirmed\",\n  \"plan\": \"Prescribed mild anxiolytic, follow-up in 2 weeks\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/{{encounterId}}",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "{{encounterId}}"]
            }
          }
        },
        {
          "name": "Create Prescription",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"encounterId\": \"{{encounterId}}\",\n  \"patientId\": \"{{patientId}}\",\n  \"practitionerId\": \"b84141c5-8d0e-4b80-9da7-d5f6b2812daa\",\n  \"medication\": \"Lorazepam\",\n  \"dosage\": \"0.5mg\",\n  \"frequency\": \"Twice daily as needed\",\n  \"duration\": \"30 days\",\n  \"instructions\": \"Take as needed for anxiety, do not exceed 2 doses per day\",\n  \"refills\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/{{encounterId}}/prescriptions",
              "host": ["{{baseUrl}}"],
              "path": ["encounters", "{{encounterId}}", "prescriptions"]
            }
          }
        },
        {
          "name": "Get Prescriptions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/prescriptions?patientId={{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["prescriptions"],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{patientId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Create Lab Result",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{patientId}}\",\n  \"encounterId\": \"{{encounterId}}\",\n  \"testName\": \"Complete Blood Count\",\n  \"testCode\": \"CBC\",\n  \"results\": {\n    \"WBC\": \"7.2 K/uL\",\n    \"RBC\": \"4.5 M/uL\",\n    \"Hemoglobin\": \"14.2 g/dL\",\n    \"Hematocrit\": \"42.1%\",\n    \"Platelets\": \"250 K/uL\"\n  },\n  \"referenceRanges\": {\n    \"WBC\": \"4.0-11.0 K/uL\",\n    \"RBC\": \"4.2-5.4 M/uL\",\n    \"Hemoglobin\": \"12.0-16.0 g/dL\",\n    \"Hematocrit\": \"36.0-46.0%\",\n    \"Platelets\": \"150-450 K/uL\"\n  },\n  \"status\": \"FINAL\",\n  \"performedAt\": \"2024-01-15T08:00:00Z\",\n  \"reportedAt\": \"2024-01-15T12:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/lab-results",
              "host": ["{{baseUrl}}"],
              "path": ["lab-results"]
            }
          }
        },
        {
          "name": "Get Lab Results",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/lab-results?patientId={{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["lab-results"],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{patientId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Billing",
      "item": [
        {
          "name": "Create Tariff",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"CONSULT-001\",\n  \"name\": \"General Consultation\",\n  \"description\": \"Standard consultation with general practitioner\",\n  \"category\": \"CONSULTATION\",\n  \"price\": 150.00,\n  \"currency\": \"USD\",\n  \"duration\": 30,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tariffs",
              "host": ["{{baseUrl}}"],
              "path": ["tariffs"]
            }
          }
        },
        {
          "name": "Get All Tariffs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tariffs",
              "host": ["{{baseUrl}}"],
              "path": ["tariffs"]
            }
          }
        },
        {
          "name": "Create Invoice",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"{{patientId}}\",\n  \"encounterId\": \"{{encounterId}}\",\n  \"items\": [\n    {\n      \"tariffId\": \"tariff-id\",\n      \"description\": \"General Consultation\",\n      \"quantity\": 1,\n      \"unitPrice\": 150.00,\n      \"totalPrice\": 150.00\n    }\n  ],\n  \"subtotal\": 150.00,\n  \"taxAmount\": 15.00,\n  \"totalAmount\": 165.00,\n  \"currency\": \"USD\",\n  \"dueDate\": \"2024-02-15T00:00:00Z\",\n  \"notes\": \"Payment due within 30 days\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/invoices",
              "host": ["{{baseUrl}}"],
              "path": ["invoices"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('invoiceId', response.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Invoices",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices?patientId={{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["invoices"],
              "query": [
                {
                  "key": "patientId",
                  "value": "{{patientId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Invoice by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices/{{invoiceId}}",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "{{invoiceId}}"]
            }
          }
        },
        {
          "name": "Send Invoice",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"method\": \"EMAIL\",\n  \"recipient\": \"patient@email.com\",\n  \"message\": \"Please find your invoice attached.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/invoices/{{invoiceId}}/send",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "{{invoiceId}}", "send"]
            }
          }
        },
        {
          "name": "Record Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"invoiceId\": \"{{invoiceId}}\",\n  \"amount\": 165.00,\n  \"currency\": \"USD\",\n  \"method\": \"CREDIT_CARD\",\n  \"reference\": \"CC-TXN-123456\",\n  \"paidAt\": \"2024-01-15T14:30:00Z\",\n  \"notes\": \"Payment processed successfully\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            }
          }
        },
        {
          "name": "Get Payments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments?invoiceId={{invoiceId}}",
              "host": ["{{baseUrl}}"],
              "path": ["payments"],
              "query": [
                {
                  "key": "invoiceId",
                  "value": "{{invoiceId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Analytics & Reports",
      "item": [
        {
          "name": "Generate Report",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reportType\": \"PATIENT_DEMOGRAPHICS\",\n  \"params\": {\n    \"startDate\": \"2024-01-01\",\n    \"endDate\": \"2024-01-31\",\n    \"clinicId\": \"{{tenantId}}\"\n  },\n  \"format\": \"PDF\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reports/generate",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "generate"]
            }
          }
        },
        {
          "name": "Get Available Reports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reports",
              "host": ["{{baseUrl}}"],
              "path": ["reports"]
            }
          }
        },
        {
          "name": "Get Report by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reports/report-id",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "report-id"]
            }
          }
        },
        {
          "name": "Refresh Materialized Views",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reports/refresh-views",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "refresh-views"]
            }
          }
        },
        {
          "name": "Get Dashboard Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reports/dashboard?period=MONTHLY",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "dashboard"],
              "query": [
                {
                  "key": "period",
                  "value": "MONTHLY"
                }
              ]
            }
          }
        }
      ]
    }
  ]
} 